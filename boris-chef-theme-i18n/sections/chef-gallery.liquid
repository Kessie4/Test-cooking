{% schema %}
{
  "name":"Galerie (Mosaik)",
  "settings":[{"type":"text","id":"title","label":"Titel","default":"Impressionen"},{"type":"text","id":"subtitle","label":"Untertitel","default":"Ein Eindruck von Ambiente, Anrichten und Garpunkten."}],
  "blocks":[{"type":"image","name":"Bild","settings":[{"type":"image_picker","id":"img","label":"Bild"},{"type":"text","id":"alt","label":"Alt-Text","default":"Foto"},{"type":"select","id":"span","label":"Breite","options":[{"value":"c4","label":"1/3"},{"value":"c6","label":"1/2"},{"value":"c8","label":"2/3"},{"value":"c12","label":"100%"}],"default":"c6"}]}],
  "presets":[{"name":"Galerie"}]
}
{% endschema %}

<section id="galerie" class="section-chef">
  <div class="container-chef columns-chef">
    <div>
      <h2>{{ section.settings.title }}</h2>
      {% if section.settings.subtitle != blank %}<p class="sub">{{ section.settings.subtitle }}</p>{% endif %}
      <div class="mosaic-chef">
        {% for block in section.blocks %}
          <a href="#" class="{{ block.settings.span }}" data-chef-lb>
            {% if block.settings.img %}
              <img src="{{ block.settings.img | img_url: '1100x' }}" alt="{{ block.settings.alt | escape }}" loading="lazy"/>
            {% else %}
              {{ 'image' | placeholder_svg_tag }}
            {% endif %}
          </a>
        {% endfor %}
      </div>
    </div>
    <aside class="sticky-chef">
      <div class="panel-chef">
        <strong style="display:block;margin-bottom:6px">Unverbindliche Anfrage</strong>
        <p class="sub">Antwort innerhalb von 24h. Datum, Ort, Personenanzahl & PrÃ¤ferenzen angeben.</p>
        <p style="margin:.4rem 0">ðŸ“ž <a href="tel:+41766205010">+41 76 620 50 10</a></p>
        <p style="margin:.4rem 0">ðŸ“§ <a href="mailto:brou.boris@gmail.com">brou.boris@gmail.com</a></p>
        <a class="btn-chef" href="https://wa.me/41766205010">Ãœber WhatsApp anfragen</a>
      </div>
    </aside>
  </div>
</section>

<script>
  document.addEventListener('click', function(e){
    const a = e.target.closest('[data-chef-lb]');
    if(!a) return;
    e.preventDefault();
    const src = a.querySelector('img')?.src;
    if(!src) return;
    const wrap = document.createElement('div');
    wrap.style.cssText='position:fixed;inset:0;background:rgba(0,0,0,.88);display:flex;align-items:center;justify-content:center;z-index:1000';
    wrap.addEventListener('click',()=>wrap.remove());
    const img = document.createElement('img');
    img.src=src;img.style.maxWidth='92vw';img.style.maxHeight='86vh';img.style.borderRadius='10px';
    wrap.appendChild(img);document.body.appendChild(wrap);
  });
</script>
